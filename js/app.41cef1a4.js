(function(){"use strict";var e={3080:function(e,t,o){var s=o(9242),l=o(4677),r=(o(343),o(3396)),a=o(4870);const n=e=>((0,r.dD)("data-v-3633fad6"),e=e(),(0,r.Cn)(),e),i={class:"w-screen h-screen bg-black opacity-50 top-0 left-0 z-10 fixed flex items-center justify-center"},c=n((()=>(0,r._)("div",{class:"loading"},null,-1))),u=[c];function d(e,t){return(0,r.wg)(),(0,r.iD)("div",i,u)}var p=o(89);const m={},g=(0,p.Z)(m,[["render",d],["__scopeId","data-v-3633fad6"]]);var v=g,w={setup(e){const t=(0,a.iH)(!1),o=e=>{t.value=e};return(0,r.JJ)("controlLoading",o),(e,o)=>{const s=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),t.value?((0,r.wg)(),(0,r.j4)(v,{key:0})):(0,r.kq)("",!0)],64)}}};const f=w;var h=f,b=o(678),y=o.p+"img/img.b74fc2f8.svg",x="data:image/png;base64,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",k=o(7139),U={required(e){return""!==e&&void 0!==e&&null!==e},name(e){return e?.length>=2},password(e){return/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{8,20}$/.test(e)},email(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}},S={required:"這是必填",name:"暱稱長度不足",email:"信箱格式有誤",password:"密碼需要英數混合，並且長度為8-20字元"},A=o(4301),D=(0,A.Q_)("vaildate",{state:()=>({validateList:[],errorFlag:!1}),actions:{updateValidateList(e){this.validateList=e},updateErrorFlag(e){this.errorFlag=e},resetVaild(){this.errorFlag=!1,this.validateList=[]}}}),C=o(6265),q=o.n(C);const B=(0,l.pm)(),j=q().create({});j.interceptors.request.use((e=>{console.log("config",e);const t=e.data?.params;return t?(Object.keys(t).forEach((e=>{t[e]||delete t[e]})),e):e}),(e=>e)),j.interceptors.response.use((e=>(console.log("response",e.status),e.data)),(e=>{const t=e.response?.data.message?.message;return t&&B.error(t),Promise.reject(e)}));var K=j;const V="https://warm-stream-37441.herokuapp.com",Y=()=>{const e=localStorage.getItem("token");return{authorization:`Bearer ${e}`}},F=()=>{const e=localStorage.getItem("token");return{"Content-Type":"multipart/form-data",authorization:`Bearer ${e}`}},M=e=>{const t=Y();return K.get(V+e,{headers:t})},I=(e,t={})=>{const o=Y();return K.post(V+e,t,{headers:o})},W=(e,t={})=>{const o=Y();return K.patch(V+e,t,{headers:o})},H=e=>{const t=Y();return console.log("headers",t),K["delete"](V+e,{headers:t})},E=(e,t={})=>{const o=F();return K.post(V+e,t,{headers:o})};var L=(0,A.Q_)("user",{state:()=>({user:{}}),persist:!0,actions:{updateUser(e){this.user=e},async getUser(){try{const e=await M("/users/profile");console.log("user",e.user),"success"===e.status&&(this.user=e.user)}catch(S){console.log("error",S)}}}}),J=(0,A.Q_)("room",{state:()=>({room:{}}),persist:!0,actions:{updateRoom(e){this.room=e}}});const Z={class:"border-2 my-2 w-[373px] h-[51px] flex items-center bg-white border-black p-4"},Q=["maxlength","value","placeholder","type"],O={key:0,class:"text-red text-left"};var z={props:{validId:{type:String,required:!0},modelValue:null,vaildField:{type:Array,required:!0},type:{type:String,default:"text"},placeholder:{type:String},maxLength:{type:Number,default:30}},emits:["change"],setup(e,{emit:t}){const o=e,s=D(),{validateList:l,errorFlag:n}=(0,A.Jk)(s),i=(0,a.iH)(null),{validId:c,modelValue:u,vaildField:d}=(0,a.BK)(o),p=()=>{for(const e of d.value){const t=U[e];if(!t(u.value))return m(),void(i.value=e)}i.value=null,s.updateValidateList([])};(0,r.YP)(u,(e=>{p()})),(0,r.YP)(n,(e=>{n.value&&p()}));const m=()=>{const e=new Set([...l.value,c.value]);s.updateValidateList([...e])},g=e=>{t("update:modelValue",e.target.value)};return(0,r.bv)((()=>{})),(t,o)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",Z,[(0,r._)("input",{maxlength:e.maxLength,value:(0,a.SU)(u),onInput:g,class:"w-full h-7 text-gray-400",placeholder:e.placeholder,type:e.type},null,40,Q)]),(0,a.SU)(n)?((0,r.wg)(),(0,r.iD)("p",O,(0,k.zw)((0,a.SU)(S)[i.value]),1)):(0,r.kq)("",!0)],64))}};const R=z;var T=R;const G={class:"text-center"},P=["onClick"];var N={emits:["setComp"],setup(e,{emit:t}){const o=D(),n=L(),{validateList:i}=(0,A.Jk)(o),c=(0,r.f3)("controlLoading"),u=(0,l.pm)(),d=(0,b.tv)(),p=()=>{t("setComp",1)},m=(0,a.qj)({email:"",password:""}),g=async()=>{if(0===i.value.length)try{c(!0);const e=await I("/users/sign_in",m),{status:t,user:{token:o,name:s}}=e;"success"===t&&(localStorage.setItem("token",o),n.updateUser({name:s})),d.push("/")}catch(S){const t=S.response.data.message;t&&u.error(t)}finally{c(!1)}else o.updateErrorFlag(!0)};return(0,r.Jd)((()=>{o.resetVaild()})),(e,t)=>((0,r.wg)(),(0,r.iD)("div",G,[(0,r.Wm)(T,{modelValue:(0,a.SU)(m).email,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.SU)(m).email=e),modelModifiers:{trim:!0},vaildField:["required","email"],validId:"email",placeholder:"Email"},null,8,["modelValue"]),(0,r.Wm)(T,{modelValue:(0,a.SU)(m).password,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,a.SU)(m).password=e),modelModifiers:{trim:!0},vaildField:["required","password"],validId:"password",type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,r._)("button",{onClick:g,class:"mt-6 w-[374px] h-[54px] button block"}," 登入 "),(0,r._)("a",{class:"text-black pt-3 block cursor-pointer",onClick:(0,s.iM)(p,["prevent"])},"註冊帳號",8,P)]))}};const _=N;var X=_;const $={class:"text-center"},ee=["onClick"];var te={emits:["setComp"],setup(e,{emit:t}){const o=D(),n=(0,l.pm)(),i=L(),{validateList:c}=(0,A.Jk)(o),u=(0,r.f3)("controlLoading"),d=(0,b.tv)(),p=()=>{t("setComp",0)},m=(0,a.qj)({name:"",email:"",password:""}),g=async()=>{if(0===c.value.length)try{u(!0);const e=await I("/users/sign_up",m),{status:t,user:{token:o,name:s}}=e;"success"===t&&(localStorage.setItem("token",o),i.updateUser({name:s})),d.push("/")}catch(S){const t=S.response.data.message;t&&n.error(t)}finally{u(!1)}else o.updateErrorFlag(!0)};return(0,r.Jd)((()=>{o.resetVaild()})),(e,t)=>((0,r.wg)(),(0,r.iD)("div",$,[(0,r.Wm)(T,{modelValue:(0,a.SU)(m).name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.SU)(m).name=e),modelModifiers:{trim:!0},vaildField:["required","name"],validId:"name",placeholder:"暱稱"},null,8,["modelValue"]),(0,r.Wm)(T,{modelValue:(0,a.SU)(m).email,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,a.SU)(m).email=e),modelModifiers:{trim:!0},vaildField:["required","email"],validId:"email",placeholder:"Email"},null,8,["modelValue"]),(0,r.Wm)(T,{modelValue:(0,a.SU)(m).password,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,a.SU)(m).password=e),modelModifiers:{trim:!0},vaildField:["required","password"],validId:"password",type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,r._)("button",{onClick:g,class:"mt-6 w-[374px] h-[54px] button block"}," 註冊 "),(0,r._)("a",{class:"text-black pt-3 block cursor-pointer",onClick:(0,s.iM)(p,["prevent"])},"登入",8,ee)]))}};const oe=te;var se=oe;const le={class:"w-[869px] h-[539px] fixed top-0 right-0 bottom-0 left-0 m-auto p-12 border-2 flex items-center bg-[#EFECE7] shadow-light"},re=(0,r._)("img",{src:y,alt:""},null,-1),ae={class:"flex flex-col items-center pl-6"},ne=(0,r._)("img",{src:x,alt:""},null,-1),ie=(0,r._)("p",{class:"font-bold text-2xl pb-6"},"到元宇宙展開全新社交圈",-1);var ce={setup(e){const t=(0,a.iH)(0),o=e=>{t.value=e};return(e,s)=>((0,r.wg)(),(0,r.iD)("section",le,[re,(0,r._)("div",ae,[ne,ie,0===t.value?((0,r.wg)(),(0,r.j4)(X,{key:0,onSetComp:o})):((0,r.wg)(),(0,r.j4)(se,{key:1,onSetComp:o}))])]))}};const ue=ce;var de=ue,pe=o(5743),me=o.n(pe);const ge={class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ve=(0,r._)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},null,-1),we=[ve];function fe(e,t){return(0,r.wg)(),(0,r.iD)("svg",ge,we)}const he={},be=(0,p.Z)(he,[["render",fe]]);var ye=be;const xe={class:"bg-secondary/50 p-2 rounded-md mb-4"},ke={class:"cursor-pointer"},Ue=["src"],Se={class:"pl-3"},Ae={class:"text-base text-bold"},De={class:"text-gray text-xs pt-1"},Ce={class:"pl-16"};var qe={props:{comment:{type:Object,required:!0,default:()=>{}}},setup(e){const t=e=>me()(e).format("YYYY/MM/DD HH:mm");return(o,s)=>{const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",xe,[(0,r._)("div",ke,[(0,r.Wm)(l,{class:"flex",to:`/post/${e.comment.user._id}`},{default:(0,r.w5)((()=>[(0,r._)("img",{class:"avatar w-[50px] h-[50px]",src:e.comment.user?.avatar,alt:""},null,8,Ue),(0,r._)("div",Se,[(0,r._)("p",Ae,(0,k.zw)(e.comment.user?.name),1),(0,r._)("p",De,(0,k.zw)(t(e.comment.createdAt)),1)])])),_:1},8,["to"])]),(0,r._)("p",Ce,(0,k.zw)(e.comment.comment),1)])}}};const Be=qe;var je=Be;const Ke={class:"box-rounded w-full smw-[533px] min-h-[133px] p-6 mb-6"},Ve={class:"cursor-pointer"},Ye=["src"],Fe={class:"pl-3"},Me={class:"text-base text-bold"},Ie={class:"text-gray text-xs pt-1"},We={class:"py-2"},He=["src"],Ee={class:"flex items-center py-2"},Le={class:"pl-1"},Je={class:"pt-2 flex items-center justify-between"},Ze=["src"],Qe={class:"w-[calc(100%-60px)] h-10 border-2 flex justify-between items-center"},Oe=["onKeyup"],ze={class:"pt-10"};var Re={props:{postData:{type:Object,default:()=>{}}},emits:["handleLike","handleComment"],setup(e,{emit:t}){const o=e,n=(0,a.iH)(""),i=L(),{user:c}=(0,A.Jk)(i),u=(0,l.pm)(),d=e=>me()(e).format("YYYY/MM/DD HH:mm"),p=()=>{o.postData.likes.includes(c.value._id)?t("handleLike",{id:o.postData.id,setLike:!1}):t("handleLike",{id:o.postData.id,setLike:!0})},m=()=>{0!==n.value.length?(t("handleComment",{id:o.postData.id,content:n.value}),n.value=""):u.error("請至少輸入一個字")};return(t,o)=>{const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Ke,[(0,r._)("div",Ve,[(0,r.Wm)(l,{class:"flex",to:`/post/${e.postData.user._id}`},{default:(0,r.w5)((()=>[(0,r._)("img",{class:"avatar w-[50px] h-[50px]",src:e.postData.user?.avatar,alt:""},null,8,Ye),(0,r._)("div",Fe,[(0,r._)("p",Me,(0,k.zw)(e.postData.user?.name),1),(0,r._)("p",Ie,(0,k.zw)(d(e.postData.createdAt)),1)])])),_:1},8,["to"])]),(0,r._)("p",We,(0,k.zw)(e.postData.content),1),e.postData.cover?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"border-2 rounded-lg overflow-hidden",src:e.postData.cover,alt:""},null,8,He)):(0,r.kq)("",!0),(0,r._)("div",Ee,[(0,r.Wm)(ye,{class:"cursor-pointer text-primary",onClick:p}),(0,r._)("span",Le,(0,k.zw)(e.postData.likes.length),1)]),(0,r._)("div",Je,[(0,r._)("img",{class:"avatar w-[50px] h-[50px]",src:(0,a.SU)(c).avatar,alt:""},null,8,Ze),(0,r._)("div",Qe,[(0,r.wy)((0,r._)("input",{onKeyup:(0,s.D2)(m,["enter"]),class:"pl-2 w-[calc(100%-6rem)]",maxlength:"100",type:"text",placeholder:"留言...","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,40,Oe),[[s.nr,n.value]]),(0,r._)("button",{onClick:m,class:"bg-primary h-full w-24 text-white"}," 留言 ")])]),(0,r._)("div",ze,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.postData.comments,(e=>((0,r.wg)(),(0,r.j4)((0,a.SU)(je),{key:e._id,comment:e},null,8,["comment"])))),128))])])}}};const Te=Re;var Ge=Te;const Pe={class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ne=(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1),_e=[Ne];function Xe(e,t){return(0,r.wg)(),(0,r.iD)("svg",Pe,_e)}const $e={},et=(0,p.Z)($e,[["render",Xe]]);var tt=et;const ot={class:"pl-2 bg-white border-2 flex mt-4 md:mt-0 justify-between border-black w-full md:w-[356px] h-[46px] mb-4"},st=["value"];var lt={props:{modelValue:null},setup(e){const t=(0,r.f3)("fetchData"),o=(0,r.f3)("updateKeyword"),s=(0,r.f3)("searchData");return(e,l)=>((0,r.wg)(),(0,r.iD)("div",ot,[(0,r._)("input",{value:(0,a.SU)(s).keyword,onChange:l[0]||(l[0]=(...e)=>(0,a.SU)(o)&&(0,a.SU)(o)(...e)),class:"block w-100% md:w-[280px]",type:"text",placeholder:"搜尋貼文"},null,40,st),(0,r._)("button",{onClick:l[1]||(l[1]=(...e)=>(0,a.SU)(t)&&(0,a.SU)(t)(...e)),class:"bg-primary text-white w-[46px] h-full border-l-2 border-black flex items-center justify-center"},[(0,r.Wm)(tt)])]))}};const rt=lt;var at=rt;const nt=["value"],it=["value"];var ct={props:{option:{type:Array,default:()=>[]},modelValue:null},emits:["change"],setup(e,{emit:t}){const o=e=>{t("update:modelValue",e.target.value)};return(t,s)=>((0,r.wg)(),(0,r.iD)("select",{value:e.modelValue,onChange:o,class:"border-2 pl-2 w-full md:w-[156px] h-[46px]",name:"",id:""},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.option,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e.key,key:e.key},(0,k.zw)(e.content),9,it)))),128))],40,nt))}};const ut=ct;var dt=ut,pt=o(1373),mt=(0,pt.Z)();const gt=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},vt={class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},wt=(0,r.uE)('<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',8),ft=[wt];function ht(e,t){return(0,r.wg)(),(0,r.iD)("svg",vt,ft)}const bt={},yt=(0,p.Z)(bt,[["render",ht]]);var xt=yt;const kt={class:"mb-4 pr-4 border-2 rounded-md flex items-center justify-between border-l-none bg-white h-[80px] relative before:-z-10 before:w-full before:h-full before:bg-white before:content-[''] before:border-2 before:absolute before:-bottom-1.5 before:-left-1.5 before:rounded-md"},Ut=["src"],St={class:"pl-4 flex-1"},At={class:"font-bold"},Dt=(0,r._)("span",null,"發送訊息",-1);var Ct={setup(e){const t=(0,b.tv)(),o=(0,b.yj)(),l=L(),n=J(),{user:i}=(0,A.Jk)(l),c=(0,a.iH)(!1),u=(0,a.qj)({}),d=(0,r.Fl)((()=>o.params.id)),p=(0,r.Fl)((()=>d.value===i.value._id)),m=async()=>{try{const e=await M(`/users/profile/${d.value}`);"success"===e.status&&Object.assign(u,e.user),console.log("profile",u)}catch(S){console.log("error",S)}},g=(0,r.Fl)((()=>{const e=i.value.following?.map((e=>e.user));return e.includes(d.value)}));console.log("isFollowed",g.value);const v=async()=>{try{const e=g.value?H(`/users/${d.value}/unfollow`):I(`/users/${d.value}/follow`),t=await e;"success"===t.status&&(l.getUser(),m()),console.log("profile",u)}catch(S){console.log("error",S)}},w=async()=>{if(c.value)return;const e={receiver:d.value};try{c.value=!0;const o=await I("/chat/room-info",e),{status:s,roomId:l,name:r,avatar:a,_id:i}=o;if("success"===s){if(console.log("res",o),n.updateRoom({roomId:l,name:r,avatar:a,receiver:i}),mt.emit("handleRoom",!0),"desktop"!==gt())return void t.push("/chat-room");mt.emit("handleRoom",!0)}}catch(S){console.log("error",S)}finally{c.value=!1}};return(0,r.bv)((()=>{m()})),(e,t)=>((0,r.wg)(),(0,r.iD)("div",kt,[(0,r._)("img",{class:"rounded-l-sm border-r-2 w-[76px] h-[76px]",src:(0,a.SU)(u).avatar},null,8,Ut),(0,r._)("div",St,[(0,r._)("p",At,(0,k.zw)((0,a.SU)(u).name),1),(0,r._)("p",null,(0,k.zw)((0,a.SU)(u)?.followers?.length)+"人追蹤",1)]),(0,r.wy)((0,r._)("button",{onClick:w,class:"flex items-center justify-center button text-black bg-secondary w-32 h-9 mr-2"},[Dt,c.value?((0,r.wg)(),(0,r.j4)((0,a.SU)(xt),{key:0,class:"ml-1 h-4 w-4 animate-spin"})):(0,r.kq)("",!0)],512),[[s.F8,!(0,a.SU)(p)]]),(0,r.wy)((0,r._)("button",{onClick:v,class:"button text-black bg-secondary w-32 h-9"},(0,k.zw)((0,a.SU)(g)?"取消追蹤":"追蹤"),513),[[s.F8,!(0,a.SU)(p)]])]))}};const qt=Ct;var Bt=qt;const jt={class:"box-rounded h-[132px] mt-4"},Kt=(0,r.uE)('<ul class="h-[42px] flex items-center pl-4 border-b-2"><li class="dot bg-[#DE4B63]"></li><li class="dot bg-[#FAA722]"></li><li class="dot bg-[#83C51D]"></li></ul><p class="text-gray pt-8 pl-4">目前尚無動態，新增一則貼文吧！</p>',2),Vt=[Kt];function Yt(e,t){return(0,r.wg)(),(0,r.iD)("div",jt,Vt)}const Ft={},Mt=(0,p.Z)(Ft,[["render",Yt]]);var It=Mt;const Wt={key:1,class:"md:flex justify-between"};var Ht={setup(e){const t=(0,r.f3)("controlLoading"),o=(0,a.qj)([]),s=(0,b.yj)(),l=(0,r.Fl)((()=>s.path.startsWith("/post"))),n=[{key:"desc",content:"從新到舊"},{key:"asc",content:"舊到最新"}],i=(0,a.qj)({keyword:"",sort:"desc"}),c=e=>{i.keyword=e.target.value},u=(e=!0)=>{l.value?d(e):p(e)},d=async e=>{e&&t(!0);const l=s.params.id;try{const e=await M(`/posts/user/${l}`),{status:t,posts:s}=e;o.length=0,"success"===t&&Object.assign(o,s)}catch(S){console.log("error",S)}t(!1)},p=async e=>{e&&t(!0);let s=`/?timeSort=${i.sort}`;i.keyword&&(s+=`&keyword=${i.keyword}`);try{const e=await M("/posts"+s),{status:t,posts:l}=e;o.length=0,"success"===t&&Object.assign(o,l)}catch(S){console.log("error",S)}t(!1)},m=async({id:e,setLike:t})=>{const o=t?I(`/posts/${e}/likes`):H(`/posts/${e}/unlikes`);try{const e=await o;"success"===e.status&&u(!1)}catch(S){console.log("error",S)}},g=async({id:e,content:t})=>{try{const o=await I(`/posts/${e}/comment`,{comment:t});"success"===o.status&&u(!1)}catch(S){console.log("error",S)}};return(0,r.YP)((()=>i.sort),((e,t)=>{u()})),(0,r.YP)(s,(()=>{u()})),(0,r.JJ)("updateKeyword",c),(0,r.JJ)("searchData",i),(0,r.JJ)("fetchData",u),(0,r.bv)((()=>{u()})),(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,a.SU)(l)?((0,r.wg)(),(0,r.j4)(Bt,{key:0})):((0,r.wg)(),(0,r.iD)("div",Wt,[(0,r.Wm)(dt,{modelValue:(0,a.SU)(i).sort,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.SU)(i).sort=e),onChange:p,option:n},null,8,["modelValue"]),(0,r.Wm)(at)])),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(o),(e=>((0,r.wg)(),(0,r.j4)(Ge,{key:e._id,onHandleComment:g,onHandleLike:m,postData:e},null,8,["postData"])))),128)),0===(0,a.SU)(o).length?((0,r.wg)(),(0,r.j4)(It,{key:2})):(0,r.kq)("",!0)],64))}};const Et=Ht;var Lt=Et;const Jt={class:"bg-white border-b-2 p-4 relative"},Zt={class:"md:w-[869px] mx-auto flex justify-between items-center"},Qt=(0,r.Uk)("MetaWall"),Ot=["src"],zt={class:"text-bold font-logo pl-2"},Rt={class:"absolute right-0 top-12 z-10 grid w-[180px] border-2 border-black text-center"},Tt=(0,r.Uk)("我的貼文牆"),Gt=(0,r.Uk)("修改個人資料");var Pt={setup(e){const t=L(),{user:o}=(0,A.Jk)(t),l=(0,b.tv)(),n=(0,a.iH)(!1),i=()=>{localStorage.setItem("token",""),l.push("/login")};return console.log("name",o.value.name),(e,t)=>{const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("header",Jt,[(0,r._)("div",Zt,[(0,r.Wm)(l,{class:"text-[26px] block font-logo",to:"/"},{default:(0,r.w5)((()=>[Qt])),_:1}),(0,r._)("div",{class:"flex items-center relative p-2",onMouseover:t[0]||(t[0]=()=>n.value=!0),onMouseleave:t[1]||(t[1]=()=>n.value=!1)},[(0,r._)("img",{class:"avatar w-[40px] h-[40px]",src:(0,a.SU)(o).avatar,alt:""},null,8,Ot),(0,r._)("span",zt,(0,k.zw)((0,a.SU)(o).name),1),(0,r.wy)((0,r._)("div",Rt,[(0,r.Wm)(l,{to:`/post/${(0,a.SU)(o)._id}`,class:"bg-white py-2 hover:bg-secondary"},{default:(0,r.w5)((()=>[Tt])),_:1},8,["to"]),(0,r.Wm)(l,{to:"/userInfo",class:"border-t-2 border-b-2 border-black bg-white py-2 hover:bg-secondary"},{default:(0,r.w5)((()=>[Gt])),_:1}),(0,r._)("button",{type:"button",class:"bg-white py-2 hover:bg-secondary",onClick:i}," 登出 ")],512),[[s.F8,n.value]])],32)])])}}};const Nt=Pt;var _t=Nt;const Xt={class:"h-6 w-6",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},$t=(0,r._)("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),eo=(0,r.Uk)(),to=(0,r._)("path",{d:"M10 5a2 2 0 0 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6"},null,-1),oo=(0,r.Uk)(),so=(0,r._)("path",{d:"M9 17v1a3 3 0 0 0 6 0v-1"},null,-1),lo=[$t,eo,to,oo,so];function ro(e,t){return(0,r.wg)(),(0,r.iD)("svg",Xt,lo)}const ao={},no=(0,p.Z)(ao,[["render",ro]]);var io=no;const co={class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},uo=(0,r._)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},null,-1),po=[uo];function mo(e,t){return(0,r.wg)(),(0,r.iD)("svg",co,po)}const go={},vo=(0,p.Z)(go,[["render",mo]]);var wo=vo;const fo={class:"h-6 w-6",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},ho=(0,r._)("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),bo=(0,r._)("line",{x1:"10",y1:"14",x2:"21",y2:"3"},null,-1),yo=(0,r._)("path",{d:"M21 3L14.5 21a.55 .55 0 0 1 -1 0L10 14L3 10.5a.55 .55 0 0 1 0 -1L21 3"},null,-1),xo=[ho,bo,yo];function ko(e,t){return(0,r.wg)(),(0,r.iD)("svg",fo,xo)}const Uo={},So=(0,p.Z)(Uo,[["render",ko]]);var Ao=So;const Do={class:"box w-[309px] p-8"},Co={class:"button w-[261px] h-[54px]"},qo=(0,r.Uk)(" 張貼動態 "),Bo={class:"pt-4"},jo={class:"pb-4"},Ko=["src"],Vo={class:"pl-4 font-bold"},Yo={class:"pb-4"},Fo={class:"w-[50px] h-[50px] border-2 flex items-center justify-center bg-sky rounded-full"},Mo=(0,r._)("span",{class:"pl-4 text-bold"},"追蹤名單",-1),Io={class:"pb-4"},Wo={class:"w-[50px] h-[50px] border-2 flex items-center justify-center bg-sky rounded-full"},Ho=(0,r._)("span",{class:"pl-4 text-bold"},"我按讚的文章",-1),Eo={class:""},Lo={class:"w-[50px] h-[50px] border-2 flex items-center justify-center bg-sky rounded-full"},Jo=(0,r._)("span",{class:"pl-4 text-bold"},"聊天室",-1);var Zo={setup(e){const t=L(),{user:o}=(0,A.Jk)(t);return(e,t)=>{const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Do,[(0,r._)("button",Co,[(0,r.Wm)(s,{class:"block w-full",to:"/postadd"},{default:(0,r.w5)((()=>[qo])),_:1})]),(0,r._)("ul",Bo,[(0,r._)("li",jo,[(0,r.Wm)(s,{class:"flex items-center w-full",to:"/userInfo"},{default:(0,r.w5)((()=>[(0,r._)("img",{class:"avatar w-[50px] h-[50px]",src:(0,a.SU)(o).avatar,alt:""},null,8,Ko),(0,r._)("span",Vo,(0,k.zw)((0,a.SU)(o).name),1)])),_:1})]),(0,r._)("li",Yo,[(0,r.Wm)(s,{class:"flex items-center w-full hover:text-primary",to:"/follow"},{default:(0,r.w5)((()=>[(0,r._)("div",Fo,[(0,r.Wm)(io)]),Mo])),_:1})]),(0,r._)("li",Io,[(0,r.Wm)(s,{class:"flex items-center w-full hover:text-primary",to:"/likes"},{default:(0,r.w5)((()=>[(0,r._)("div",Wo,[(0,r.Wm)(wo)]),Ho])),_:1})]),(0,r._)("li",Eo,[(0,r.Wm)(s,{class:"flex items-center w-full hover:text-primary",to:"/chatroomlist"},{default:(0,r.w5)((()=>[(0,r._)("div",Lo,[(0,r.Wm)(Ao)]),Jo])),_:1})])])])}}};const Qo=Zo;var Oo=Qo;const zo={class:"m-4"},Ro={class:"text-xs px-2"};var To={props:{message:{type:Object,required:!0,default:()=>{}}},setup(e){const t=e,o=L(),{user:s}=(0,A.Jk)(o),{message:l,sender:n,createdAt:i}=(0,a.BK)(t.message),c=(0,r.Fl)((()=>s?.value._id===n.value)),u=e=>(new Date).getDate()===(new Date).getDate(e),d=e=>{const t=u(e)?"HH:mm":"MM/DD HH:mm";return me()(e).format(t)};return(e,t)=>((0,r.wg)(),(0,r.iD)("div",zo,[(0,r._)("div",{class:(0,k.C_)(["flex items-end",{"flex-row-reverse":(0,a.SU)(c)}])},[(0,r._)("div",{class:(0,k.C_)(["inline-flex max-w-[300px] p-2 m-h-[20px] border-2 rounded-2xl",(0,a.SU)(c)?"bg-slate-300":"bg-slate-200"])},(0,k.zw)((0,a.SU)(l)),3),(0,r._)("span",Ro,(0,k.zw)(d((0,a.SU)(i))),1)],2)]))}};const Go=To;var Po=Go;const No={class:"bg-slate-700 w-full p-2 fixed md:absolute bottom-0 flex justify-between items-center left-0"};var _o={emits:["sendMessage","userTyping"],setup(e,{emit:t}){const o=(0,a.iH)(null),s=(0,l.pm)(),n=()=>{let e=o.value.innerText;e=e.replace(/\n/g,""),0!==e.length?e.length>100?s.error("輸入內容長度超過上限"):(t("sendMessage",e),o.value.innerText="",o.value.focus()):s.error("請輸入內容再送出訊息")};return(0,r.bv)((()=>{const e=new KeyboardEvent("keyup",{bubbles:!0});o.value.dispatchEvent(e),o.value.addEventListener("keypress",(e=>{t("userTyping",e.key),"Enter"===e.key&&n()}))})),(e,t)=>((0,r.wg)(),(0,r.iD)("div",No,[(0,r._)("div",{class:"bg-white min-h-[32px] max-h-36 flex items-center rounded-2xl w-11/12 break-all px-2 outline-none overflow-hidden",contenteditable:"true",id:"test",role:"textbox",spellcheck:"true",tabindex:"0",ref_key:"inputBox",ref:o},null,512),(0,r.Wm)(Ao,{onClick:n,class:"text-white cursor-pointer"})]))}};const Xo=_o;var $o=Xo;const es={class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ts=(0,r._)("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),os=(0,r._)("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),ss=[ts,os];function ls(e,t){return(0,r.wg)(),(0,r.iD)("svg",es,ss)}const rs={},as=(0,p.Z)(rs,[["render",ls]]);var ns=as;const is={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},cs=(0,r._)("polyline",{points:"15 18 9 12 15 6"},null,-1),us=[cs];function ds(e,t){return(0,r.wg)(),(0,r.iD)("svg",is,us)}const ps={},ms=(0,p.Z)(ps,[["render",ds]]);var gs=ms,vs=o(2066);const ws={class:"md:fixed md:border-2 bottom-0 right-10 w-screen md:w-[338px] overflow-hidden h-screen md:h-[455px] rounded-tl-lg rounded-tr-lg"},fs={class:"h-14 flex px-2 md:px-4 py-2 bg-white justify-between items-center border-b-2"},hs={class:"flex items-center"},bs=["src"],ys={class:"pl-4 font-bold"},xs={key:0,class:"text-xs text-gray"},ks={key:0,class:"text-center py-2 text-sm"},Us={key:1,class:"flex items-center justify-center pt-2 text-slate-700"},Ss=(0,r.Uk)(" 載入中");var As={setup(e){const t=(0,l.pm)(),s=L(),n=J(),{room:i}=(0,A.Jk)(n),{user:c}=(0,A.Jk)(s),u=(0,b.tv)(),d=(0,a.iH)(!1),p=(0,a.iH)(!1),m=(0,a.iH)(null),g=(0,a.iH)(!1),v=(0,a.iH)(!1),w=(0,a.iH)(!1),f=(0,a.iH)(0),h=(0,a.qj)([]);let y=null;const x=localStorage.getItem("token");x||(t.error("請先登入喔！"),u.push("/"));const U=(0,vs.io)(`${V}/chat`,{query:{token:localStorage.getItem("token"),room:i.value.roomId},forceNew:!0});U.on("connect",(()=>{console.log("connect----"),setTimeout((()=>{D()}),200)})),U.emit("joinRoom",i.value.roomId),U.on("chatMessage",(e=>{console.log("接收到別人傳的訊息",e),h.push(e),mt.emit("updateChatRecord",{roomId:i.value.roomId,msg:e}),m.value.scrollHeight-m.value.scrollTop>m.value.clientHeight?c.value._id!==e.sender&&(v.value=!0):j()})),U.on("history",(e=>{d.value=!1,console.log("接收到歷史訊息",e);const t=[...e,...h];Object.assign(h,t),console.log("messageList",h),e.length<30&&(g.value=!0),w.value?S():(j(),w.value=!0)}));const S=async()=>{await(0,r.Y3)(),m.value.scrollTop=m.value.scrollHeight-f.value};U.on("typing",(e=>{p.value=e})),U.on("error",(e=>{t.error(e),u.go("/")}));const D=()=>{if(console.log("getHistory",g.value),g.value)return;const e={lastTime:h[0]?.createdAt};d.value=!0,console.warn("getHistory---",U.connected),U.emit("history",e)},C=()=>{U.emit("typing",!1)},q=e=>{"Enter"!==e?(U.emit("typing",!0),clearTimeout(y),y=setTimeout((()=>{C()}),1500)):C()},B=e=>{const t={message:e,sender:c.value._id};U.emit("chatMessage",t)},j=async()=>{await(0,r.Y3)(),v.value=!1,m.value.scrollTop=m.value?.scrollHeight},K=()=>{mt.emit("handleRoom",!1)},Y=()=>{m.value.addEventListener("scroll",(()=>{0===m.value.scrollTop&&(f.value=m.value.scrollHeight,D())}),!1)},F=()=>{u.go(-1)},M=()=>(console.log("room",i),i.value.avatar??new URL(o(2893),o.b));return(0,r.bv)((()=>{console.warn("mounted"),"desktop"!==gt()&&(document.body.style="overflow: hidden;position:fixed"),Y()})),(0,r.Jd)((()=>{console.warn("onBeforeUnmount"),n.updateRoom({}),U.emit("leaveRoom",i.value.roomId),U.off(),U.disconnect(),document.body.style="",clearTimeout(y)})),(e,t)=>((0,r.wg)(),(0,r.iD)("div",ws,[(0,r._)("div",fs,[(0,r._)("div",hs,[(0,r.Wm)(gs,{onClick:F,class:"block md:hidden w-8 h-8 mr-2"}),(0,r._)("img",{class:"avatar w-10 h-10",src:M(),alt:""},null,8,bs),(0,r._)("span",ys,(0,k.zw)((0,a.SU)(i).name),1)]),p.value?((0,r.wg)(),(0,r.iD)("span",xs,"對方正在輸入中...")):(0,r.kq)("",!0),(0,r.Wm)(ns,{class:"cursor-pointer hidden md:block hover:opacity-50",onClick:K})]),(0,r._)("div",{id:"messageContainer",ref_key:"messageContainer",ref:m,class:"inner relative bg-slate-100 overflow-y-auto"},[0===(0,a.SU)(h).length?((0,r.wg)(),(0,r.iD)("div",ks," 開始聊天吧！ ")):(0,r.kq)("",!0),d.value?((0,r.wg)(),(0,r.iD)("div",Us,[Ss,(0,r.Wm)(xt,{class:"ml-1 h-4 w-4 animate-spin"})])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(h),(e=>((0,r.wg)(),(0,r.j4)(Po,{key:e._id,message:e},null,8,["message"])))),128))],512),v.value?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:j,class:"w-full h-12 absolute bottom-10 left-0 p-2 bg-black bg-opacity-40 text-white"}," 您有新訊息 ")):(0,r.kq)("",!0),(0,r.Wm)($o,{onUserTyping:q,onSendMessage:B})]))}};const Ds=(0,p.Z)(As,[["__scopeId","data-v-135ce313"]]);var Cs=Ds,qs={setup(e){const t=(0,a.iH)(!1),o=e=>{t.value=e,console.warn("handleRoom----",e)};return mt.on("handleRoom",o),(0,r.Jd)((()=>{console.log("onBeforeUnmount!!!"),mt.off("handleRoom",o)})),(e,o)=>t.value?((0,r.wg)(),(0,r.j4)(Cs,{key:0})):(0,r.kq)("",!0)}};const Bs=qs;var js=Bs;const Ks={class:"h-6 w-6",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Vs=(0,r._)("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),Ys=(0,r.Uk)(),Fs=(0,r._)("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),Ms=(0,r.Uk)(),Is=(0,r._)("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1),Ws=[Vs,Ys,Fs,Ms,Is];function Hs(e,t){return(0,r.wg)(),(0,r.iD)("svg",Ks,Ws)}const Es={},Ls=(0,p.Z)(Es,[["render",Hs]]);var Js=Ls;const Zs={class:"h-6 w-6",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},Qs=(0,r._)("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),Os=(0,r.Uk)(),zs=(0,r._)("polyline",{points:"5 12 3 12 12 3 21 12 19 12"},null,-1),Rs=(0,r.Uk)(),Ts=(0,r._)("path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"},null,-1),Gs=(0,r.Uk)(),Ps=(0,r._)("path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"},null,-1),Ns=[Qs,Os,zs,Rs,Ts,Gs,Ps];function _s(e,t){return(0,r.wg)(),(0,r.iD)("svg",Zs,Ns)}const Xs={},$s=(0,p.Z)(Xs,[["render",_s]]);var el=$s;const tl={class:"block md:hidden border-2 bg-secondary px-6 fixed bottom-4 left-0 right-0 m-auto rounded-[32px] w-11/12 h-[65px]"},ol={class:"flex h-full justify-between items-center"};var sl={setup(e){const t=[{icon:el,path:"/"},{icon:io,path:"/follow"},{icon:wo,path:"/likes"},{icon:Js,path:"/postadd"},{icon:Ao,path:"/chatroomlist"}];return(e,o)=>{const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",tl,[(0,r._)("ul",ol,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(t,((e,t)=>(0,r._)("li",{key:t,class:(0,k.C_)([{"bg-primary text-white":3===t},"border-2 w-12 h-12 bg-white rounded-full flex items-center justify-center"])},[(0,r.Wm)(s,{class:"block",to:e.path},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.icon)))])),_:2},1032,["to"])],2))),64))])])}}};const ll=sl;var rl=ll;const al={class:"flex justify-between md:pt-16 pt-2 px-2 w-full md:w-[869px] m-auto"},nl={class:"w-full md:w-[533px]"},il={class:"hidden md:block"};var cl={setup(e){const t=L();return(0,r.bv)((()=>{t.getUser()})),(e,t)=>{const o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(_t),(0,r._)("div",al,[(0,r._)("section",nl,[(0,r.Wm)(o),(0,r.Wm)((0,a.SU)(rl))]),(0,r._)("aside",il,[(0,r.Wm)(Oo)]),(0,r.Wm)(js)])],64)}}};const ul=cl;var dl=ul;const pl={class:"flex"},ml=["src"],gl={class:"flex-1 pl-2"},vl={class:""},wl={class:"text-gray text-sm"};var fl={props:{followInfo:{type:Object,required:!0,default:()=>{}}},setup(e){const t=e,o=e=>me()(e).format("YYYY/MM/DD HH:MM"),s=(0,r.Fl)((()=>t.followInfo.likes));return(t,l)=>((0,r.wg)(),(0,r.iD)("div",pl,[(0,r._)("img",{class:"w-10 h-10 avatar",src:e.followInfo?.user?.avatar,alt:""},null,8,ml),(0,r._)("div",gl,[(0,r._)("p",vl,(0,k.zw)(e.followInfo?.user?.name),1),(0,r._)("p",wl,[(0,r._)("span",null,(0,k.zw)((0,a.SU)(s)?"發文時間":"追蹤時間")+":",1),(0,r.Uk)(" "+(0,k.zw)(o(e.followInfo?.createdAt)),1)])])]))}};const hl=fl;var bl=hl;const yl={class:"box-rounded flex items-baseline p-4 h-[77px] mb-4 justify-between"};var xl={props:{followInfo:{type:Object,required:!0,default:()=>{}}},setup(e){return(t,o)=>((0,r.wg)(),(0,r.iD)("li",yl,[(0,r.Wm)(bl,{followInfo:e.followInfo},null,8,["followInfo"])]))}};const kl=xl;var Ul=kl;const Sl=(0,r._)("h1",{class:"title"},"追蹤名單",-1),Al={class:"pt-4"};var Dl={setup(e){const t=(0,a.qj)([]),o=(0,r.f3)("controlLoading"),s=async()=>{try{o(!0),t.length=0;const e=await M("/users/following");"success"===e.status&&Object.assign(t,e.following)}catch(S){console.log("error",S)}finally{o(!1)}};return(0,r.bv)((()=>{s()})),(e,o)=>((0,r.wg)(),(0,r.iD)("section",null,[Sl,(0,r._)("ul",Al,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(t),(e=>((0,r.wg)(),(0,r.j4)(Ul,{key:e._id,followInfo:e},null,8,["followInfo"])))),128))])]))}};const Cl=Dl;var ql=Cl;const Bl=(0,r._)("h3",{class:""},"輸入新密碼",-1),jl=(0,r._)("h3",{class:""},"再次輸入",-1);var Kl={setup(e){const t=(0,r.f3)("controlLoading"),o=(0,l.pm)(),s=(0,a.qj)({password:"",confirmPassword:""}),n=async()=>{if(s.password===s.confirmPassword)try{t(!0);const e=await W("/users/update_password",s),{status:l,user:{token:r}}=e;"success"===l&&(localStorage.setItem("token",r),o.success("修改成功"),s.password="",s.confirmPassword="")}catch(S){const t=S.response.data.message;t&&o.error(t)}finally{t(!1)}else o.error("兩次填寫密碼不一致")};return(e,t)=>((0,r.wg)(),(0,r.iD)("div",null,[Bl,(0,r.Wm)(T,{modelValue:(0,a.SU)(s).password,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.SU)(s).password=e),modelModifiers:{trim:!0},vaildField:["required","password"],validId:"password",type:"password",placeholder:"Password"},null,8,["modelValue"]),jl,(0,r.Wm)(T,{modelValue:(0,a.SU)(s).confirmPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,a.SU)(s).confirmPassword=e),modelModifiers:{trim:!0},vaildField:["required","password"],validId:"confirmPassword",type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,r._)("button",{onClick:n,class:"button w-[373px] h-[54px] mt-6"}," 重設密碼 ")]))}};const Vl=Kl;var Yl=Vl;const Fl=(0,r._)("label",{for:"fileUpload",class:"mt-5 cursor-pointer block w-[128px] h-[32px] leading-7 bg-black text-white text-center"}," 上傳圖片 ",-1);var Ml={emits:["setFile","setError"],setup(e,{emit:t}){const o=(0,r.f3)("controlLoading"),s={large:"圖片檔案過大，僅限 1mb 以下檔案",fileName:"圖片格式錯誤，僅限 JPG、PNG 圖片"},l=["jpg","jpeg","png"],a=e=>{const o=e.target.files[0];l.includes(o.type)?t("setError",s.fileName):o.size>1048576?t("setError",s.large):n(o)},n=async e=>{const s=new FormData;s.append("image",e),o(!0);try{const e=await E("/upload",s),{imgUrl:o}=e;"success"===e.status&&t("setFile",o)}catch(S){const{status:t,data:o}=S.response;console.log(`error--${t}`,"error",o)}o(!1)};return(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[Fl,(0,r._)("input",{onChange:a,class:"hidden",type:"file",id:"fileUpload"},null,32)],64))}};const Il=Ml;var Wl=Il;const Hl={class:"flex flex-col items-center"},El=["src"],Ll={class:"pt-2"},Jl=(0,r._)("h3",{class:""},"暱稱",-1),Zl={class:"w-full"},Ql=(0,r._)("h3",{class:""},"性別",-1),Ol={class:"flex items-center"},zl=(0,r._)("label",{class:"pl-2 pr-4",for:"male"},"男性 ",-1),Rl=(0,r._)("label",{class:"pl-2 pr-4",for:"female"},"女性",-1),Tl={key:0,class:"text-red w-full"};var Gl={setup(e){const t=D(),o=L(),{validateList:n}=(0,A.Jk)(t),{user:i}=(0,A.Jk)(o),c=(0,r.f3)("controlLoading"),u=(0,l.pm)(),d={name:"",gender:"",avatar:""},p=(0,a.qj)({...d}),m=(0,a.qj)({isShow:!1,errorText:""}),g=e=>{m.isShow=!0,m.errorText=e},v=()=>{m.isShow=!1,m.errorText="",Object.assign(p,d)},w=e=>{console.log("setFile",e),p.avatar=e,f()},f=async()=>{if(0===n.value.length)try{c(!0);const e=await W("/users/profile",{...p});v();const{status:t,user:s}=e;"success"===t&&o.updateUser(s),u.success("修改成功")}catch(S){const t=S.response.data.message;t&&u.error(t)}finally{c(!1)}else t.updateErrorFlag(!0)};return(0,r.YP)(i,(()=>{p.avatar=i?.value.avatar,p.name=i?.value.name,p.gender=i?.value.gender}),{immediate:!0}),(e,t)=>((0,r.wg)(),(0,r.iD)("div",Hl,[(0,r._)("img",{class:"avatar w-[107px] h-[107px]",src:(0,a.SU)(p).avatar,alt:""},null,8,El),(0,r.Wm)(Wl,{onSetError:g,onSetFile:w}),(0,r._)("div",Ll,[Jl,(0,r.Wm)(T,{modelValue:(0,a.SU)(p).name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.SU)(p).name=e),modelModifiers:{trim:!0},vaildField:["required","name"],validId:"name"},null,8,["modelValue"])]),(0,r._)("div",Zl,[Ql,(0,r._)("div",Ol,[(0,r.wy)((0,r._)("input",{id:"male",value:"male",type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>(0,a.SU)(p).gender=e)},null,512),[[s.G2,(0,a.SU)(p).gender]]),zl,(0,r.wy)((0,r._)("input",{id:"female",value:"female",type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>(0,a.SU)(p).gender=e)},null,512),[[s.G2,(0,a.SU)(p).gender]]),Rl])]),(0,a.SU)(m).isShow?((0,r.wg)(),(0,r.iD)("p",Tl,(0,k.zw)((0,a.SU)(m).errorText),1)):(0,r.kq)("",!0),(0,r._)("button",{onClick:f,class:"button bg-yellow text-black w-[373px] h-[54px] mt-6"}," 送出更新 ")]))}};const Pl=Gl;var Nl=Pl;const _l=(0,r._)("h1",{class:"title"},"修改個人資料",-1),Xl={class:"pt-8"},$l={class:"flex items-center relative left-2"},er={class:"min-h-[350px] bg-white w-full rounded-r-md border-2 px-[80px] py-8"};var tr={setup(e){const t=(0,a.iH)(0),o=e=>{t.value=e};return(e,s)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[_l,(0,r._)("div",Xl,[(0,r._)("ul",$l,[(0,r._)("li",{onClick:s[0]||(s[0]=e=>o(0)),class:(0,k.C_)(["bg-white border-2 rounded-t-lg px-5 leading-10 w-28 h-10  border-b-0 cursor-pointer",{"bg-black text-white":0===t.value}])}," 暱稱修改 ",2),(0,r._)("li",{onClick:s[1]||(s[1]=e=>o(1)),class:(0,k.C_)(["bg-white border-2 rounded-t-lg px-5 leading-10 w-28 h-10  border-b-0 cursor-pointer",{"bg-black text-white":1===t.value}])}," 重設密碼 ",2)]),(0,r._)("div",er,[0===t.value?((0,r.wg)(),(0,r.j4)(Nl,{key:0})):((0,r.wg)(),(0,r.j4)(Yl,{key:1}))])])],64))}};const or=tr;var sr=or;const lr={class:"box-rounded flex items-center p-4 mb-4 pr-10 justify-between h-[77px]"},rr={class:"flex"},ar=(0,r.Uk)(" 取消 ");var nr={props:{likePost:{type:Object,required:!0,default:()=>{}}},emits:["sendMessage","userTyping"],setup(e,{emit:t}){const o=e,s=()=>{t("handleCancel",o.likePost.id)};return(t,o)=>((0,r.wg)(),(0,r.iD)("li",lr,[(0,r.Wm)(bl,{followInfo:e.likePost},null,8,["followInfo"]),(0,r._)("div",rr,[(0,r._)("div",{onClick:s,class:"flex cursor-pointer flex-col items-center justify-between"},[(0,r.Wm)(wo),ar])])]))}};const ir=nr;var cr=ir;const ur=(0,r._)("h1",{class:"title"},"我按讚的貼文",-1),dr={class:"w-full pt-4"};var pr={setup(e){const t=(0,a.qj)([]),o=(0,r.f3)("controlLoading"),s=async()=>{try{o(!0),t.length=0;const e=await M("/users/like_list");"success"===e.status&&Object.assign(t,e.likeList)}catch(S){console.log("error",S)}finally{o(!1)}},l=async e=>{try{const t=await H(`/posts/${e}/unlikes`);"success"===t.status&&s()}catch(S){console.log("error",S)}};return(0,r.bv)((()=>{s()})),(e,o)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[ur,(0,r._)("ul",dr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(t),(e=>((0,r.wg)(),(0,r.j4)(cr,{key:e._id,onHandleCancel:l,likePost:e},null,8,["likePost"])))),128))])],64))}};const mr=pr;var gr=mr;const vr=(0,r._)("h1",{class:"title mb-4"},"張貼動態",-1),wr={class:"box-rounded p-8"},fr=(0,r._)("h3",{class:"pb-2"},"貼文內容",-1),hr={key:0,class:"my-4 border-2 rounded-md overflow-hidden w-full h-auto"},br=["src"],yr={key:1,class:"text-red w-full"};var xr={setup(e){const t=(0,b.tv)(),o={content:"",cover:""},l=(0,a.qj)({...o}),n=(0,a.qj)({isShow:!1,errorText:""}),i=async()=>{try{await I("/posts",{...l}),c(),t.push("/")}catch(S){console.log("error",S)}},c=()=>{n.isShow=!1,n.errorText="",Object.assign(l,o)},u=e=>{n.isShow=!0,n.errorText=e},d=e=>{console.log("setFile",e),l.cover=e};return(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[vr,(0,r._)("div",wr,[fr,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.SU)(l).content=e),class:"border-2 border-black w-full p-2",placeholder:"輸入您的貼文內容",name:"",id:"",cols:"30",rows:"10"},null,512),[[s.nr,(0,a.SU)(l).content]]),(0,r.Wm)(Wl,{onSetError:u,onSetFile:d}),(0,a.SU)(l).cover?((0,r.wg)(),(0,r.iD)("div",hr,[(0,r._)("img",{src:(0,a.SU)(l).cover},null,8,br)])):(0,r.kq)("",!0),(0,a.SU)(n).isShow?((0,r.wg)(),(0,r.iD)("p",yr,(0,k.zw)((0,a.SU)(n).errorText),1)):(0,r.kq)("",!0),(0,r._)("button",{onClick:i,class:"w-[323px] h-[54px] rounded-md border-2 relative -translate-x-1/2 left-1/2 my-8 mx-auto bg-[#A8B0B9]"}," 送出貼文 ")])],64))}};const kr=xr;var Ur=kr;const Sr={class:"flex"},Ar=["src"],Dr={class:"flex-1 pl-2"},Cr={class:"font-bold"},qr={class:"w-[200px] md:w-80 h-10 whitespace-nowrap overflow-hidden overflow-ellipsis text-sm text-slate-700"},Br={class:"text-gray text-xs"};var jr={props:{room:{type:Object,required:!0,default:()=>{}}},setup(e){const t=e,s=J(),n=(0,l.pm)(),{room:i}=(0,A.Jk)(s),c=(0,b.tv)(),{name:u,message:d,avatar:p,roomId:m,_id:g}=(0,a.BK)(t.room),v=e=>me()(e).format("YYYY/MM/DD HH:MM"),w=()=>p.value??new URL(o(2893),o.b),f=()=>{i.value.roomId&&i.value.roomId!==m.value?n.error("您一次只能跟一個人聊天"):(s.updateRoom({roomId:m,name:u,avatar:p,receiver:g}),console.log("deviceType()",gt()),"desktop"===gt()?mt.emit("handleRoom",!0):c.push("/chat-room"))};return(e,t)=>((0,r.wg)(),(0,r.iD)("li",{onClick:f,class:"box-rounded flex items-baseline p-4 h-[77px] mb-4 justify-between cursor-pointer"},[(0,r._)("div",Sr,[(0,r._)("img",{class:"w-10 h-10 avatar",src:w(),alt:"avatar"},null,8,Ar),(0,r._)("div",Dr,[(0,r._)("p",Cr,(0,k.zw)((0,a.SU)(u)),1),(0,r._)("p",qr,(0,k.zw)((0,a.SU)(d)?.[0]?.message),1)])]),(0,r._)("span",Br,(0,k.zw)(v((0,a.SU)(d)?.[0]?.createdAt)),1)]))}};const Kr=jr;var Vr=Kr;const Yr=(0,r._)("h1",{class:"title"},"聊天室",-1),Fr={class:"pt-4"},Mr={class:"text-center flex items-center justify-center py-6"},Ir=(0,r.Uk)("載入中...");var Wr={setup(e){const t=(0,a.qj)([]),o=(0,a.iH)(!1),l=({roomId:e,msg:o})=>{const s=t.findIndex((t=>t.roomId===e));s>-1&&(t[s].message=[o])};mt.on("updateChatRecord",l);const n=async()=>{o.value=!0;try{const e=await I("/chat/chat-record"),{status:s,chatRecord:l}=e;"success"===s&&(console.log("res",e),Object.assign(t,l),console.log("chatList",t))}catch(S){console.log("error",S)}finally{o.value=!1}};return(0,r.bv)((()=>{n()})),(0,r.Jd)((()=>{mt.off("updateChatRecord",l)})),(e,l)=>((0,r.wg)(),(0,r.iD)("section",null,[Yr,(0,r._)("ul",Fr,[(0,r.wy)((0,r._)("li",Mr,[Ir,(0,r.Wm)(xt,{class:"pl-1"})],512),[[s.F8,o.value]]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(t),(e=>((0,r.wg)(),(0,r.j4)(Vr,{key:e._id,room:e},null,8,["room"])))),128))])]))}};const Hr=Wr;var Er=Hr,Lr={setup(e){return(e,t)=>((0,r.wg)(),(0,r.j4)((0,a.SU)(Cs)))}};const Jr=Lr;var Zr=Jr;const Qr=[{path:"/login",name:"login",component:de},{path:"/chatroom",name:"ChatRoom",component:Zr},{path:"/",name:"postDefault",component:dl,children:[{path:"/",name:"postWall",component:Lt},{path:"/post/:id",name:"post",component:Lt},{path:"/follow",name:"follow",component:ql},{path:"/userInfo",name:"userInfo",component:sr},{path:"/likes",name:"poseLikeList",component:gr},{path:"/postadd",name:"PostAdd",component:Ur},{path:"/chatroomlist",name:"ChatRoomList",component:Er}]}],Or=(0,b.p7)({history:(0,b.r5)(),routes:Qr});Or.beforeEach(((e,t,o)=>{"/login"!==e.path&&!localStorage.getItem("token")&&o("login"),o()}));var zr=Or,Rr=o(5417),Tr=o(8125),Gr=o(8321),Pr=o(7749);Tr.vI.add(Gr.BC0);const Nr=(0,s.ri)(h);Nr.component("font-awesome-icon",Pr.GN);const _r=(0,A.WB)();_r.use(Rr.ZP),Nr.use(zr).use(_r).use(l.ZP).mount("#app")},2893:function(e){e.exports="data:image/png;base64,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"}},t={};function o(s){var l=t[s];if(void 0!==l)return l.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,s,l,r){if(!s){var a=1/0;for(u=0;u<e.length;u++){s=e[u][0],l=e[u][1],r=e[u][2];for(var n=!0,i=0;i<s.length;i++)(!1&r||a>=r)&&Object.keys(o.O).every((function(e){return o.O[e](s[i])}))?s.splice(i--,1):(n=!1,r<a&&(a=r));if(n){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,l,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){o.b=document.baseURI||self.location.href;var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,r,a=s[0],n=s[1],i=s[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(i)var u=i(o)}for(t&&t(s);c<a.length;c++)r=a[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},s=self["webpackChunkmessage_board"]=self["webpackChunkmessage_board"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(3080)}));s=o.O(s)})();
//# sourceMappingURL=app.41cef1a4.js.map